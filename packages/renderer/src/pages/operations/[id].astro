---
import { DocOperation, DocType } from "@flexydox/doc-schema";
import { loadDocSchema } from "../../asset-loader";
import Operation from "../../components/doc-fragments/operation.astro";
import DefaultLayout from "../../layouts/default-layout.astro";

export async function getStaticPaths() {
  const doc = await loadDocSchema();
  const allOps = doc.operations;
  return allOps.map((op) => ({
    params: { id: op.id }
  }));
}

const { id } = Astro.params;
const types = Astro.locals.operations as DocOperation[];
const currentOperation = types.find((op) => op.id === id);
---

<DefaultLayout>
  <Operation operation={currentOperation} />
</DefaultLayout>
