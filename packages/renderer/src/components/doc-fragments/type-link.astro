---
import { DocType, DocTypeLink } from "@flexydox/doc-schema";
import { typeLinkFromType } from "../../astro-utils/type-link-from-type";

import { linkUrl } from "../../utils/link-url";

const linkProp: DocTypeLink = Astro.props.link;
const typeId = Astro.props.typeId;
const showPopOver = Astro.props.showPopOver;

const allTypes = Astro.locals.types as DocType[];

const type = allTypes.find((type) => type.id === typeId);

const link = linkProp ?? typeLinkFromType(type);
const href = link?.href;
const title = link?.title;

const linkHref = linkUrl(`/types/${href}`);
---

<a href={linkHref}>{title}</a>
