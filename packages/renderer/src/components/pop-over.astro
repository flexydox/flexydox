---
import { Icon } from "astro-icon/components";

const popOverId = Astro.props.popOverId;
---

<style is:global>
  .po-wrapper {
  }
  .po-trigger {
    background: none;
    border: none;
    cursor: pointer;
    padding: var(--size-xs);
    margin: 0;
    color: var(--c-text-secondary);
    cursor: help;
    display: inline-block;
    vertical-align: middle;
  }
  .popover[popover]:not(:popover-open):not(dialog[open]) {
    display: none;
  }

  .popover::backdrop {
    background-color: rgba(0, 0, 0, 0.7);
  }
  .popover {
    --horiz-padding: var(--size-m);
    border: 1px solid white;
    border-radius: var(--radius-3);
    height: max-content;
    max-height: 80svh;

    position: fixed;
    width: minmax(300px, 400px);
    max-width: 60svh;
    margin: auto;
    bottom: 100px;

    color: var(--c-text-primary);
    background-color: var(--c-bg-inactive);
    border: 1px solid var(--c-text-secondary);
    padding: 0;

    .title {
      background-color: var(--c-bg-secondary);
      padding: var(--size-m) var(--horiz-padding);
      margin: 0;
    }
    .type > section,
    .type > div {
      padding: 0 var(--horiz-padding);
    }
  }
</style>

<span class="po-wrapper">
  <slot name="trigger" /><button
    popovertarget={popOverId}
    class="po-trigger"
    data-po-target={popOverId}><Icon name="help" /></button
  >
</span>

<section class="popover shadow" id={popOverId} popover>
  <div class="overlay">
    {popOverId && <slot />}
  </div>
</section>
